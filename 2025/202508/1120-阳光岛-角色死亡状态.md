# 1120-阳光岛-角色死亡状态

## 目标

新增角色的死亡状态。

## 环境

- Time 2026-01-26
- Zig 0.15.1

## 参考

1. <https://www.bilibili.com/video/BV1jf9XYQEhW>

## 想法

在之前已有的状态的基础上，新增死亡状态，并实现死亡时的动画效果。

## player.zig

只列出了角色死亡的状态的逻辑，其它的状态没有列出来。

```zig
const DeadState = struct {
    var animation: zhu.graphics.FrameAnimation = undefined;
    const frames = zhu.graphics.framesX(2, size, 0.1);

    pub fn init() void {
        const hurtImage = image.sub(.init(.xy(0, 128), .xy(64, 32)));
        animation = .init(hurtImage, &frames);
    }

    fn enter() void {
        std.log.info("enter dead", .{});
        velocity = .xy(0, -200);
    }

    fn update(delta: f32) void {
        animation.loopUpdate(delta);
    }

    fn draw() void {
        batch.drawImage(animation.currentImage(), position, .{});
    }
};
```

## 效果

![角色死亡状态][1]

[1]: images/阳光岛18.gif
## 附录
