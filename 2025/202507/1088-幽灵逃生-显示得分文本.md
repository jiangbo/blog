# 1088-幽灵逃生-显示得分文本

## 目标

在 UI 界面上显示玩家的技能冷却图标。

## 环境

- Time 2026-01-13
- Zig 0.15.1

## 参考

1. <https://www.bilibili.com/video/BV1jf9XYQEhW>

## 想法

使用的位图文字来进行的显示。感觉生成的文字有黑色的背景，需要的时候来解决，现在还看不太出来。

## battle.zig

只粘贴了绘制相关的方法，修改了技能冷却图标的绘制逻辑。

```zig
const imageId = zhu.graphics.imageId;
pub fn drawUI() void {

    // 生命值
    var pos: zhu.Vector2 = .xy(30, 30);
    var option: camera.Option = .{ .anchor = .xy(0, 0.5) };

    const stats = player.stats;
    option.size = .xy(198, 21);
    camera.drawOption(imageId("UI/bar_bg.png"), pos.addX(30), option);
    var percent = zhu.math.percentInt(stats.health, stats.maxHealth);
    option.size.?.x = option.size.?.x * percent;
    camera.drawOption(imageId("UI/bar_red.png"), pos.addX(30), option);
    option.size = .xy(36, 39);
    camera.drawOption(imageId("UI/Red Potion.png"), pos, option);

    // 法力值
    pos = .xy(300, 30);
    option.size = .xy(198, 21);
    camera.drawOption(imageId("UI/bar_bg.png"), pos.addX(30), option);
    percent = zhu.math.percentInt(mana, 100);
    option.size.?.x = option.size.?.x * percent;
    camera.drawOption(imageId("UI/bar_blue.png"), pos.addX(30), option);
    option.size = .xy(36, 39);
    camera.drawOption(imageId("UI/Blue Potion.png"), pos, option);

    // 冷却时间
    const image = zhu.graphics.getImage("UI/Electric-Icon.png");
    var size = image.area.size.scale(0.14);
    pos = .xy(zhu.window.logicSize.x - 300, 30 - size.y / 2);
    camera.drawImage(image, pos, .{ .size = size });

    size.y = size.y * (1 - spellTimer.progress());
    camera.drawRect(.init(pos, size), .{ .color = .gray(0, 100) });

    // 得分
    pos = .xy(zhu.window.logicSize.x - 210, 6);
    camera.drawOption(imageId("UI/Textfield_01.png"), pos, .{
        .size = .xy(200, 48),
    });
    zhu.text.drawFmt("Score: {}", pos.addXY(10, 7), .{score});
}
```

## 效果

![显示得分文本][1]

[1]: images/幽灵逃生21.png

## 附录
