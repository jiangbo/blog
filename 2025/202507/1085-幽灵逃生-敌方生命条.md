# 1085-幽灵逃生-敌方生命条

## 目标

显示敌方的生命条，根据剩余生命值的多少，显示不同的颜色。

## 环境

- Time 2026-01-11
- Zig 0.15.1

## 参考

1. <https://www.bilibili.com/video/BV1jf9XYQEhW>

## 想法

跳过了教程中的武器类部分，感觉现在的功能还没有使用，用到的时候再加。

## enemy.zig

只修改了绘制部分，所有的数据都有了，只需要绘制就行。

```zig
pub fn draw() void {
    if (spawnAnimation.isRunning()) {
        const image = spawnAnimation.currentImage();
        for (&spawnEnemies) |enemy| {
            camera.drawImage(image, enemy.position, .{
                .size = size,
                .anchor = .center,
            });
        }
    }

    for (enemies.items) |enemy| {
        const image = enemy.animation.currentImage();
        var option: camera.Option = .{ .size = size, .anchor = .center };
        camera.drawImage(image, enemy.position, option);

        option.color = .{ .y = 1, .w = 0.4 };
        if (enemy.collided) option.color = .{ .x = 1, .w = 0.4 };

        camera.drawOption(circle, enemy.position, option);

        const max = enemy.stats.maxHealth;
        const percent = zhu.math.percentInt(enemy.stats.health, max);
        const pos = enemy.position.sub(deadFrames[0].area.size)
            .addY(size.y - 10);

        var color: zhu.Color = .init(1, 0.65, 0, 1);
        if (percent > 0.7) color = .green; // 健康
        if (percent < 0.3) color = .red; // 危险
        camera.drawRectBorder(.init(pos, .xy(size.x, 10)), 1, color);
        const rect: zhu.Rect = .init(pos, .xy(size.x * percent, 10));
        camera.drawRect(rect, .{ .color = color });
    }
}
```

## 效果

![敌方生命条][1]

[1]: images/幽灵逃生18.png

## 附录
