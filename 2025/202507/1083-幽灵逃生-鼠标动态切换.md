# 1083-幽灵逃生-鼠标动态切换

## 目标

鼠标有两种动画，不停切换鼠标的动画。

## 环境

- Time 2026-01-11
- Zig 0.15.1

## 参考

1. <https://www.bilibili.com/video/BV1jf9XYQEhW>

## 想法

引擎中支持了直接使用鼠标，所以可以不需要像教程中单独建立一个类。

## scene.zig

只粘贴了鼠标相关的，没有粘贴全部的代码。

```zig

pub fn init() void {
    window.initText(@import("zon/font.zon"), 24);

    vertexBuffer = window.alloc(batch.Vertex, 5000);
    zhu.graphics.frameStats(true);
    batch.init(window.logicSize, vertexBuffer);
    batch.whiteImage = zhu.graphics.imageId("white.png");

    zhu.assets.loadAtlas(atlas);
    worldSize = window.logicSize.scale(3); // 设置世界大小

    zhu.window.bindMouseIcon(.CUSTOM_1, "assets/29.png");
    zhu.window.bindMouseIcon(.CUSTOM_2, "assets/30.png");

    player.init(worldSize.scale(0.5)); // 将玩家移动到世界中心
    enemy.init();
}

var pause: bool = false;
var mouse: window.Cursor = .CUSTOM_1;
var mouseTimer: window.Timer = .init(0.3); // 鼠标切换时间
pub fn update(delta: f32) void {
    if (window.isKeyRelease(.H)) isHelp = !isHelp;
    if (window.isKeyRelease(.X)) isDebug = !isDebug;

    if (window.isKeyDown(.LEFT_ALT) and window.isKeyRelease(.ENTER)) {
        return window.toggleFullScreen();
    }

    const speed: f32 = std.math.round(400 * delta);
    if (window.isKeyDown(.UP)) camera.position.y -= speed;
    if (window.isKeyDown(.DOWN)) camera.position.y += speed;
    if (window.isKeyDown(.LEFT)) camera.position.x -= speed;
    if (window.isKeyDown(.RIGHT)) camera.position.x += speed;

    if (window.isKeyRelease(.SPACE)) pause = !pause;
    if (pause) return; // 暂停，方便录制

    if (mouseTimer.isFinishedLoopUpdate(delta)) {
        mouse = if (mouse == .CUSTOM_1) .CUSTOM_2 else .CUSTOM_1;
        window.useMouseIcon(mouse);
    }

    player.update(delta, worldSize);
    cameraFollow(player.position);
    enemy.update(delta);
}
```

## 效果

![鼠标动态切换][1]

[1]: images/幽灵逃生16.gif

## 附录
