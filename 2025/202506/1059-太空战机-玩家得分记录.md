# 1059-太空战机-玩家得分记录

## 目标

将玩家获得的分数，显示到右上角。

## 环境

- Time 2025-12-06
- Zig 0.15.1

## 参考

1. <https://www.bilibili.com/video/BV1wSCFYQEyc>

## 想法

文字的绘制，现在直接将文字弄到图片上，然后使用绘制纹理的方式，显示文字。

## player.zig

只贴出了绘制的部分，其它部分就不展示出来了，基本上没修改。

```zig
pub fn draw() void {
    // 先绘制子弹，再绘制玩家，让子弹在玩家的下面
    for (&bullets) |bullet| {
        if (bullet.dead) continue; // 子弹存活才绘制
        camera.drawOption(bulletTexture, bullet.position, .{
            .size = bulletSize,
        });
    }

    item.draw(); // 绘制掉落的物品

    if (health != 0) {
        // 绘制玩家
        camera.drawOption(texture, position, .{ .size = size });
    }

    // 绘制爆炸动画
    for (bombAnimations.items) |bomb| {
        const currentTexture = bomb.animation.currentTexture();
        camera.drawOption(currentTexture, bomb.center, .{
            .anchor = .center,
            .size = currentTexture.size().scale(2), // 爆炸动画太小
        });
    }

    // 绘制血量
    for (0..MAX_HEALTH) |index| {
        var color: gfx.Color = .init(0.4, 0.4, 0.4, 1);
        if (health > index) color = .one;
        const i: f32 = @floatFromInt(index);
        camera.drawOption(healthTexture, .init(10 + i * 40, 10), .{
            .color = color,
        });
    }

    // 绘制分数
    var buffer: [50]u8 = undefined;
    const text = zhu.format(&buffer, "SCORE:{}", .{score});
    const x = window.logicSize.x - camera.computeTextWidth(text) - 10;
    camera.drawText(text, .init(x, 10));
}
```

## 效果

![玩家得分记录][1]

[1]: images/太空战机19.png

## 附录
