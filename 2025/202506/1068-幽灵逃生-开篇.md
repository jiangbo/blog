# 1068-幽灵逃生-开篇

## 目标

学习开发一个幽灵逃生游戏。

## 环境

- Time 2025-12-29
- Zig 0.15.1

## 参考

1. <https://www.bilibili.com/video/BV1jf9XYQEhW>

## 想法

使用自己的小引擎来开发这个游戏，发现缺少的功能模块，然后添加。

## main.zig

还是从打开一个窗口开始。

```zig
const std = @import("std");
const builtin = @import("builtin");
const zhu = @import("zhu");

// const scene = @import("scene.zig");

var soundBuffer: [20]zhu.audio.Sound = undefined;

pub fn init() void {
    zhu.audio.init(44100, &soundBuffer);
    // scene.init();
}

pub fn frame(delta: f32) void {
    _ = delta;
    // scene.update(delta);
    // scene.draw();
}

pub fn deinit() void {
    // scene.deinit();
    zhu.audio.deinit();
}

pub fn main() void {
    var allocator: std.mem.Allocator = undefined;
    var debugAllocator: std.heap.DebugAllocator(.{}) = undefined;
    if (builtin.mode == .Debug) {
        debugAllocator = std.heap.DebugAllocator(.{}).init;
        allocator = debugAllocator.allocator();
    } else {
        allocator = std.heap.c_allocator;
    }

    defer if (builtin.mode == .Debug) {
        _ = debugAllocator.deinit();
    };

    zhu.window.run(allocator, .{
        .title = "幽灵逃生",
        .logicSize = .{ .x = 1280, .y = 720 },
    });
}
```

## 效果

![打开窗口][1]

[1]: images/幽灵逃生01.png

## 附录
