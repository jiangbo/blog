# 1072-幽灵逃生-玩家精灵图

## 目标

将玩家的精灵图渲染到屏幕上。

## 环境

- Time 2026-01-09
- Zig 0.15.1

## 参考

1. <https://www.bilibili.com/video/BV1jf9XYQEhW>

## 想法

教程中制作了显示的精灵图类，之前自己的小引擎已经实现了绘制精灵图，所以加载显示一下就行。

## player.zig

加载了精灵图，之前的加载方式有点变化。

```zig
const std = @import("std");
const zhu = @import("zhu");

const camera = zhu.camera;
const window = zhu.window;
const graphics = zhu.graphics;

const maxSpeed = 500;

pub var position: zhu.Vector2 = undefined;
const size: zhu.Vector2 = .square(20);
var velocity: zhu.Vector2 = .zero;
const image = graphics.imageId("sprite/ghost-idle.png");

pub fn init(initPosition: zhu.Vector2) void {
    position = initPosition;
}

pub fn update(delta: f32, worldSize: zhu.Vector2) void {
    velocity = velocity.scale(0.9);
    if (window.isKeyPress(.A)) velocity = .init(-maxSpeed, 0);
    if (window.isKeyPress(.D)) velocity = .init(maxSpeed, 0);
    if (window.isKeyPress(.W)) velocity = .init(0, -maxSpeed);
    if (window.isKeyPress(.S)) velocity = .init(0, maxSpeed);

    move(delta);
    position.clamp(.zero, worldSize.sub(size));
}

fn move(delta: f32) void {
    position = position.add(velocity.scale(delta));
}

pub fn draw() void {
    camera.drawRectBorder(.init(position, size), 5, .red);
    camera.draw(image, position);
}
```

## 效果

![玩家精灵图][1]

[1]: images/幽灵逃生05.gif

## 附录
