# 1058-太空战机-玩家血量图标

## 目标

将玩家当前的生命值以图标的方式显示出来。

## 环境

- Time 2025-12-06
- Zig 0.15.1

## 参考

1. <https://www.bilibili.com/video/BV1wSCFYQEyc>

## 想法

这个难度不大，接下来需要绘制文字了，到时候看看怎么处理比较好。

## player.zig

只贴出了绘制的部分，其它部分就不展示出来了，基本上没修改。

```zig
pub fn draw() void {
    // 先绘制子弹，再绘制玩家，让子弹在玩家的下面
    for (&bullets) |bullet| {
        if (bullet.dead) continue; // 子弹存活才绘制
        camera.drawOption(bulletTexture, bullet.position, .{
            .size = bulletSize,
        });
    }

    item.draw(); // 绘制掉落的物品

    if (health != 0) {
        // 绘制玩家
        camera.drawOption(texture, position, .{ .size = size });
    }

    // 绘制爆炸动画
    for (bombAnimations.items) |bomb| {
        const currentTexture = bomb.animation.currentTexture();
        camera.drawOption(currentTexture, bomb.center, .{
            .anchor = .center,
            .size = currentTexture.size().scale(2), // 爆炸动画太小
        });
    }

    // 绘制血量
    for (0..MAX_HEALTH) |index| {
        var color: gfx.Color = .init(0.4, 0.4, 0.4, 1);
        if (health > index) color = .one;
        const i: f32 = @floatFromInt(index);
        camera.drawOption(healthTexture, .init(10 + i * 40, 10), .{
            .color = color,
        });
    }
}
```

## 效果

![玩家血量图标][1]

[1]: images/太空战机18.gif

## 附录
